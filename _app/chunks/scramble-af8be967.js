import{sleep as b}from"./sleep-b92576d7.js";import{r as f}from"./__layout-31ea665d.js";import"./index-bab6421d.js";import"./preload-helper-e4860ae8.js";const a=(e,t)=>Math.floor(Math.random()*(t-e))+e,w=()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=e.length,r=a(0,t);return e[r]},g=(e,t)=>{const r=t/3;return e.map(()=>a(r,t-100))},P=async(e,t)=>{const r=typeof t.scramble=="number"?t.scramble:3e3;await new Promise(i=>{e.forEach(async({currentNode:m,text:s})=>{let o=s.split("");const h=g(o,r),c=Date.now();for(f(m,t.parentElement,n=>{n.classList.add("finished-typing")});Date.now()-c<r;){const n=a(0,o.length),u=h[n],L=o[n]===" ",d=()=>Date.now()-c;if((()=>d()>=u)()||L)if(!(o[n]===s[n]))o[n]=s[n];else continue;else o[n]=w();const l=o.join("");m.innerHTML=l;const p=l===s,T=t.scrambleSlowdown?Math.round(d()/100):1;if(await b(T),p){i();break}}})}),t.dispatch("done")};export{P as mode};
