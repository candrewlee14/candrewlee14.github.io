import{sleep as T}from"./sleep-b92576d7.js";import{M as f}from"./vendor-83dd8948.js";const a=(t,e)=>Math.floor(Math.random()*(e-t))+t,w=()=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=t.length,s=a(0,e);return t[s]},g=(t,e)=>{const s=e/3;return t.map(()=>a(s,e-100))},I=async(t,e)=>{const s=typeof e.scramble=="number"?e.scramble:3e3;await new Promise(i=>{t.forEach(async({currentNode:m,text:r})=>{let o=r.split("");const h=g(o,s),c=Date.now();for(f(m,e.parentElement,n=>{n.classList.add("finished-typing")});Date.now()-c<s;){const n=a(0,o.length),u=h[n],L=o[n]===" ",d=()=>Date.now()-c;if((()=>d()>=u)()||L)if(!(o[n]===r[n]))o[n]=r[n];else continue;else o[n]=w();const l=o.join("");m.innerHTML=l;const b=l===r,p=e.scrambleSlowdown?Math.round(d()/100):1;if(await T(p),b){i();break}}})}),e.dispatch("done")};export{I as mode};
